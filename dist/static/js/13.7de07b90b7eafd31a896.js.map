{"version":3,"sources":["webpack:///./src/views/my/address-form.vue?5cd4","webpack:///./src/views/my/address-form.vue?8aa4","webpack:///src/views/my/address-form.vue","webpack:///./src/views/my/address-form.vue?b892","webpack:///./src/views/my/address-form.vue"],"names":["content","__webpack_require__","module","i","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","address_form","id","province","this","form","city","district","filter","join","fetchAddress","_this","phone","address","consignee","_this2","level","pid","list","name","values","_this3","undefined","back","my_address_form","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","placeholder","model","value","callback","$$v","$set","trim","expression","_v","addressText","disabled","nativeOn","click","$event","addrPickerVisible","slot","type","size","submit","_s","position","slots","addrSlots","value-key","showToolbar","on","change","onAddressChange","addrCancel","addrOk","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.7de07b90b7eafd31a896.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ff52aa2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./address-form.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"7bb95d91\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2ff52aa2\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/address-form.vue\n// module id = Gbcb\n// module chunks = 13","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.mint-popup-addr {\\n  width: 100%;\\n}\\n.mint-popup-addr .picker-toolbar {\\n  border-bottom: 1px solid #eaeaea;\\n}\\n.mint-popup-addr .picker-toolbar span {\\n  font-size: 18px;\\n  display: inline-block;\\n  width: 60px;\\n  text-align: center;\\n  line-height: 40px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/dev/wemall/src/views/my/address-form.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;CACb;AACD;EACE,iCAAiC;CAClC;AACD;EACE,gBAAgB;EAChB,sBAAsB;EACtB,YAAY;EACZ,mBAAmB;EACnB,kBAAkB;CACnB\",\"file\":\"address-form.vue\",\"sourcesContent\":[\"\\n.mint-popup-addr {\\n  width: 100%;\\n}\\n.mint-popup-addr .picker-toolbar {\\n  border-bottom: 1px solid #eaeaea;\\n}\\n.mint-popup-addr .picker-toolbar span {\\n  font-size: 18px;\\n  display: inline-block;\\n  width: 60px;\\n  text-align: center;\\n  line-height: 40px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2ff52aa2\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/address-form.vue\n// module id = gg/B\n// module chunks = 13","<template>\n  <div class=\"page address-form-page\">\n    <form class=\"address-form\">\n      <x-field class=\"bdb\" placeholder=\"收货人\" v-model.trim=\"form.consignee\"></x-field>\n      <x-field class=\"bdb\" placeholder=\"手机号码\" v-model.trim=\"form.phone\"></x-field>\n      <x-field\n        class=\"bdb\"\n        placeholder=\"选择地区\"\n        @click.native=\"addrPickerVisible = true\"\n        :value=\"addressText\"\n        disabled>\n        <x-icon slot=\"extra\" type=\"next_page\"></x-icon>\n      </x-field>\n      <x-field class=\"bdb\" placeholder=\"详细地址\" v-model.trim=\"form.address\"></x-field>\n      <!--TODO 邮编-->\n      <!--<x-field label=\"邮编\" v-model=\"form.code\"></x-field>-->\n    </form>\n    <x-fixed-bottom>\n      <x-button size=\"full\" type=\"primary\" @click.native=\"submit\">{{ id ? '确认修改' : '确认添加' }}</x-button>\n    </x-fixed-bottom>\n    <mt-popup v-model=\"addrPickerVisible\" position=\"bottom\" class=\"mint-popup-addr\">\n      <!-- <div class=\"picker-toolbar\">\n        <span class=\"mint-datetime-action mint-datetime-cancel\" @click=\"cancleaddress\">取消</span>\n        <span class=\"mint-datetime-action mint-datetime-confirm\" @click=\"selectaddress\">确定</span>\n      </div>   -->\n      <!-- <mt-picker :slots=\"citySlots\" @change=\"onCityChange\" :visible-item-count=\"3\"></mt-picker>  -->\n      <mt-picker :slots=\"addrSlots\" value-key=\"name\" @change=\"onAddressChange\" :showToolbar=\"true\">\n        <div>\n          <span class=\"pull-left\" @click=\"addrCancel\">取消</span>\n          <span class=\"pull-right\" @click=\"addrOk\">确定</span>\n        </div>\n      </mt-picker>\n    </mt-popup>\n  </div>\n</template>\n<script>\n  export default {\n    data: function () {\n      return {\n        id: this.$route.query.id,\n        form:{\n          phone: '',\n          province: '',\n          city: '',\n          district: '',\n          address: '',\n          consignee: ''\n        },\n        addrPickerVisible: false,\n        addrSlots: [\n          {\n            flex: 1,\n            values: [],\n            className: 'slot1',\n            textAlign: 'center'\n          }, {\n            divider: true,\n            content: '-',\n            className: 'slot2'\n          }, {\n            flex: 1,\n            values: [],\n            className: 'slot3',\n            textAlign: 'center'\n          }, {\n            divider: true,\n            content: '-',\n            className: 'slot4'\n          }, {\n            flex: 1,\n            values: [],\n            className: 'slot5',\n            textAlign: 'center'\n          }\n        ],\n        province: {\n          id: 0,\n          name: ''\n        },\n        city: {\n          id: 0,\n          name: ''\n        },\n        district: {\n          id: 0,\n          name: ''\n        }\n      }\n    },\n    computed: {\n      addressText () {\n        const text = [\n          this.form.province,\n          this.form.city,\n          this.form.district\n        ].filter(i => !!i).join(' ')\n        return text\n      }\n    },\n    mounted () {\n      if (this.id) {\n        this.fetchAddress()\n      } else {\n        this.getArea(1)\n      }\n    },\n    methods: {\n      fetchAddress () {\n        this.$http.withLoading(`/api/user/address/${this.id}`).then(res => {\n          this.form = {\n            phone: res.data.phone,\n            province: res.data.province,\n            city: res.data.city,\n            district: res.data.district,\n            address: res.data.address,\n            consignee: res.data.consignee\n          }\n\n          this.province.name = res.data.province\n          this.city.name = res.data.city\n          this.district.name = res.data.district\n\n          this.getArea(1)\n        })\n      },\n      /* 获取地区列表 */\n      getArea (level, pid) {\n        if (pid === 0) {\n          return false\n        }\n\n        const params = {}\n        if (level === 1) {\n          params.level = level\n        } else if (level === 2) {\n          params.parent_id = pid\n        } else if (level === 3) {\n          params.parent_id = pid\n        }\n        this.$http('/api/area', {params}).then(res => {\n          if (level === 1) {\n            this.province.list = res.list\n            this.addrSlots[0].values = this.province.list\n          } else if (level === 2) {\n            this.city.list = res.list\n            this.addrSlots[2].values = this.city.list\n          } else if (level === 3) {\n            this.district.list = res.list\n            this.addrSlots[4].values = this.district.list\n          }\n        })\n      },\n      onAddressChange (picker, values) {\n        let that = this\n        if (values.length > 0) {\n          /* if(!that.province.id && that.province.name !== ''){\n              picker.setSlotValue(0, that.province.name);\n          } */\n          if (values[0] && that.province.id !== values[0].id) {\n            that.province.id = values[0].id\n            that.province.name = values[0].name\n            that.getArea(2, that.province.id)\n          }\n          else if (values[1] && that.city.id !== values[1].id) {\n            that.city.id = values[1].id\n            that.city.name = values[1].name\n            that.getArea(3, that.city.id)\n          }\n          else if (values[2] && that.district.id !== values[2].id) {\n            that.district.id = values[2].id\n            that.district.name = values[2].name\n          }\n        }\n      },\n      addrCancel () {\n        this.addrPickerVisible = false\n      },\n      addrOk () {\n        let that = this\n        that.form.province = that.province.name\n        that.form.city = that.city.name\n        that.form.district = that.district.name\n\n        that.addrPickerVisible = false\n      },\n      submit: function () {\n        if (!this.form.province) return this.$toast('请选择省份')\n        if (!this.form.address) return this.$toast('请填写详细地址')\n        if (!this.form.consignee) return this.$toast('请填写收货人')\n        if (!/^1[0-9]{10}$/.test(this.form.phone)) return this.$toast('手机号码格式有误')\n\n        let url = '/api/user/address'\n        let method = 'post'\n        const data = {...this.form, is_default: 0}\n        if (this.id) {\n          url = '/api/user/address/' + this.id\n          method = 'PUT'\n          data.is_default = undefined\n        }\n        this.$http.withLoading({url, data, method}).then(res => {\n          this.$toast(this.id ? '修改成功' : '添加成功')\n          this.$router.back()\n        })\n      }\n    }\n  }\n</script>\n<style>\n  .mint-popup-addr {\n    width: 100%;\n  }\n\n  .mint-popup-addr .picker-toolbar {\n    border-bottom: 1px solid #eaeaea;\n  }\n\n  .mint-popup-addr .picker-toolbar span {\n    font-size: 18px;\n    display: inline-block;\n    width: 60px;\n    text-align: center;\n    line-height: 40px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/address-form.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page address-form-page\"},[_c('form',{staticClass:\"address-form\"},[_c('x-field',{staticClass:\"bdb\",attrs:{\"placeholder\":\"收货人\"},model:{value:(_vm.form.consignee),callback:function ($$v) {_vm.$set(_vm.form, \"consignee\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.consignee\"}}),_vm._v(\" \"),_c('x-field',{staticClass:\"bdb\",attrs:{\"placeholder\":\"手机号码\"},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.phone\"}}),_vm._v(\" \"),_c('x-field',{staticClass:\"bdb\",attrs:{\"placeholder\":\"选择地区\",\"value\":_vm.addressText,\"disabled\":\"\"},nativeOn:{\"click\":function($event){_vm.addrPickerVisible = true}}},[_c('x-icon',{attrs:{\"slot\":\"extra\",\"type\":\"next_page\"},slot:\"extra\"})],1),_vm._v(\" \"),_c('x-field',{staticClass:\"bdb\",attrs:{\"placeholder\":\"详细地址\"},model:{value:(_vm.form.address),callback:function ($$v) {_vm.$set(_vm.form, \"address\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.address\"}})],1),_vm._v(\" \"),_c('x-fixed-bottom',[_c('x-button',{attrs:{\"size\":\"full\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.submit($event)}}},[_vm._v(_vm._s(_vm.id ? '确认修改' : '确认添加'))])],1),_vm._v(\" \"),_c('mt-popup',{staticClass:\"mint-popup-addr\",attrs:{\"position\":\"bottom\"},model:{value:(_vm.addrPickerVisible),callback:function ($$v) {_vm.addrPickerVisible=$$v},expression:\"addrPickerVisible\"}},[_c('mt-picker',{attrs:{\"slots\":_vm.addrSlots,\"value-key\":\"name\",\"showToolbar\":true},on:{\"change\":_vm.onAddressChange}},[_c('div',[_c('span',{staticClass:\"pull-left\",on:{\"click\":_vm.addrCancel}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"pull-right\",on:{\"click\":_vm.addrOk}},[_vm._v(\"确定\")])])])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-2ff52aa2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/my/address-form.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ff52aa2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./address-form.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./address-form.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ff52aa2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./address-form.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/address-form.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}