{"version":3,"sources":["webpack:///src/views/order/list.vue","webpack:///./src/views/order/list.vue?0acc","webpack:///./src/views/order/list.vue"],"names":["list","label","id","queryList","nextPage","_this","this","orderStatus","status","undefined","data","total","next_page_url","key","_this2","then","res","item","_this3","_this4","url","order_list","render","_vm","_h","$createElement","_c","_self","staticClass","model","value","callback","$$v","expression","_l","tab","attrs","_v","_s","directives","name","rawName","infinite-scroll-disabled","infinite-scroll-distance","bordered","nativeOn","click","$event","gotoDetail","order_sn","slot","_f","goods","pic","goods_cover","padding","goods_name","sale_price","num","total_num","total_price","pill","inline","ghost","deleteOrder","_e","cancelOrder","confirmOrder","comment_status","gotoComment","gotoDelivery","type","gotoPay","staticStyle","color","padding-left","padding-bottom","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/26.aa6c80f43ea6dcb29722.js","sourcesContent":["<template>\n  <div class=\"page page-order-list\">\n    <x-navbar v-model=\"orderStatus\" class=\"mgb\">\n      <mt-tab-item v-for=\"tab in tabs\" :key=\"tab.id\" :id=\"tab.id\">{{ tab.label }}</mt-tab-item>\n    </x-navbar>\n    <div\n      v-if=\"list.length\"\n      class=\"order-list\"\n      v-infinite-scroll=\"loadMore\"\n      infinite-scroll-disabled=\"infiniteScrollDisabled\"\n      infinite-scroll-distance=\"10\">\n      <div class=\"mod order mgb\" v-for=\"item in list\">\n        <x-cell @click.native=\"gotoDetail(item)\" bordered>\n          订单编号：{{ item.order_sn }}\n          <span slot=\"right\" class=\"primary\">{{ item.status | orderStatus }}</span>\n        </x-cell>\n        <x-media-object\n          class=\"bdb\"\n          v-for=\"goods in item.goods\"\n          :key=\"goods.id\"\n          :pic=\"goods.goods_cover\"\n          padding>\n          {{ goods.goods_name }}\n          <div slot=\"secondary\">{{ goods | goodsSkuName }}</div>\n          <x-money :value=\"goods.sale_price\" slot=\"bottom-left\"></x-money>\n          <span slot=\"bottom-right\">x{{ goods.num }}</span>\n        </x-media-object>\n        <div class=\"mod_pd bdb order-sum\">\n          共 {{ item.total_num }} 件商品，合计： <x-money :value=\"item.total_price\"></x-money>\n        </div>\n        <div class=\"text-right order-btns\" v-if=\"item.status !== 1\">\n          <x-button v-if=\"item.status === 3 ||item.status === 5 || item.status === 7\" @click.native=\"deleteOrder(item)\" pill inline ghost>删除订单</x-button>\n          <x-button v-if=\"item.status === 0\" @click.native=\"cancelOrder(item)\" pill inline ghost>取消订单</x-button>\n          <x-button v-if=\"item.status === 2\" @click.native=\"confirmOrder(item)\" pill inline ghost>确认收货</x-button>\n          <x-button v-if=\"item.status === 3 && item.comment_status === 0\" @click.native=\"gotoComment(item)\" pill inline ghost>评价订单</x-button>\n          <x-button v-if=\"item.status === 2 || item.status === 3\" @click.native=\"gotoDelivery(item)\" pill inline ghost>查看物流</x-button>\n          <x-button v-if=\"item.status === 0\" @click.native=\"gotoPay(item)\" type=\"primary\" pill inline ghost>去付款</x-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"order-list--empty\" v-else>\n      <p style=\"color: #999999;padding-left: 0.48rem;padding-bottom: 0.3rem;\">暂无数据</p>\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    data: function () {\n      return {\n        orderStatus: -1,\n        nextPage: '',\n        queries: {},\n        total: 0,\n        list: [],\n        tabs: [\n          { label: '全部', id: -1 },\n          { label: '待付款', id: 0 },\n          { label: '待发货', id: 1 },\n          { label: '待收货', id: 2 },\n          { label: '待评价', id: 3 }\n        ]\n      }\n    },\n    watch: {\n      orderStatus (val, oldVal) {\n        this.queryList()\n      }\n    },\n    computed: {\n      infiniteScrollDisabled () {\n        return !this.nextPage\n      }\n    },\n    mounted () {\n      this.queryList()\n    },\n    methods: {\n      loadMore () {\n        this.queryList(this.nextPage)\n      },\n      queryList (nextPage) {\n        const status = this.orderStatus\n        const options = nextPage || {\n          url: '/api/orders',\n          params: {\n            status: status === -1 ? undefined : status,\n            comment_status: status === 3 ? 0 : undefined\n          }\n        }\n        this.$http.withLoading(options).then(res => {\n          if (res.list.current_page === 1) {\n            this.list = res.list.data\n          } else {\n            this.list = this.list.concat(res.list.data)\n          }\n          this.total = res.list.total\n          this.nextPage = res.list.next_page_url\n        })\n      },\n      toggleList (key) {\n        console.log(key)\n      },\n      gotoDetail (item) {\n        this.$router.push(`/order/${item.id}`)\n      },\n      deleteOrder (item) {\n        this.$messagebox.confirm('确认删除？').then(action => {\n          if (action === 'cancel') return\n          this.$http.withLoading({\n            url: `/api/orders/${item.id}`,\n            method: 'delete'\n          }).then(res => {\n            this.$toast('删除成功')\n            this.list = this.list.filter(i => i !== item)\n          })\n        })\n      },\n      gotoPay (item) {\n        this.$router.push({ path: '/cart/pay', query: { orderid: item.id } })\n      },\n      cancelOrder (item) {\n        this.$messagebox.confirm('确认取消？').then(action => {\n          if (action === 'cancel') return\n          this.$http.withLoading({\n            url: `/api/order/cancel/${item.id}`,\n            method: 'put'\n          }).then(res => {\n            this.$toast('取消成功')\n            item.status = 7\n            // this.list = this.list.filter(i => i !== item)\n          })\n        })\n      },\n      confirmOrder (item) {\n        this.$messagebox.confirm('确认收货？').then(action => {\n          if (action === 'cancel') return\n          this.$http.withLoading({\n            url: `/api/order/receipts`,\n            data: { order_id: item.id },\n            method: 'post'\n          }).then(res => {\n            this.$toast('收货成功')\n            this.list = this.list.filter(i => i !== item)\n          })\n        })\n      },\n      gotoComment (item) {\n        this.$router.push(`/order/${item.id}/comment`)\n      },\n      gotoDelivery (item) {\n        this.$router.push(`/order/${item.id}/delivery`)\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/order/list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page page-order-list\"},[_c('x-navbar',{staticClass:\"mgb\",model:{value:(_vm.orderStatus),callback:function ($$v) {_vm.orderStatus=$$v},expression:\"orderStatus\"}},_vm._l((_vm.tabs),function(tab){return _c('mt-tab-item',{key:tab.id,attrs:{\"id\":tab.id}},[_vm._v(_vm._s(tab.label))])})),_vm._v(\" \"),(_vm.list.length)?_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"order-list\",attrs:{\"infinite-scroll-disabled\":\"infiniteScrollDisabled\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.list),function(item){return _c('div',{staticClass:\"mod order mgb\"},[_c('x-cell',{attrs:{\"bordered\":\"\"},nativeOn:{\"click\":function($event){_vm.gotoDetail(item)}}},[_vm._v(\"\\n        订单编号：\"+_vm._s(item.order_sn)+\"\\n        \"),_c('span',{staticClass:\"primary\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_vm._v(_vm._s(_vm._f(\"orderStatus\")(item.status)))])]),_vm._v(\" \"),_vm._l((item.goods),function(goods){return _c('x-media-object',{key:goods.id,staticClass:\"bdb\",attrs:{\"pic\":goods.goods_cover,\"padding\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(goods.goods_name)+\"\\n        \"),_c('div',{attrs:{\"slot\":\"secondary\"},slot:\"secondary\"},[_vm._v(_vm._s(_vm._f(\"goodsSkuName\")(goods)))]),_vm._v(\" \"),_c('x-money',{attrs:{\"slot\":\"bottom-left\",\"value\":goods.sale_price},slot:\"bottom-left\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"bottom-right\"},slot:\"bottom-right\"},[_vm._v(\"x\"+_vm._s(goods.num))])],1)}),_vm._v(\" \"),_c('div',{staticClass:\"mod_pd bdb order-sum\"},[_vm._v(\"\\n        共 \"+_vm._s(item.total_num)+\" 件商品，合计： \"),_c('x-money',{attrs:{\"value\":item.total_price}})],1),_vm._v(\" \"),(item.status !== 1)?_c('div',{staticClass:\"text-right order-btns\"},[(item.status === 3 ||item.status === 5 || item.status === 7)?_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.deleteOrder(item)}}},[_vm._v(\"删除订单\")]):_vm._e(),_vm._v(\" \"),(item.status === 0)?_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.cancelOrder(item)}}},[_vm._v(\"取消订单\")]):_vm._e(),_vm._v(\" \"),(item.status === 2)?_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.confirmOrder(item)}}},[_vm._v(\"确认收货\")]):_vm._e(),_vm._v(\" \"),(item.status === 3 && item.comment_status === 0)?_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.gotoComment(item)}}},[_vm._v(\"评价订单\")]):_vm._e(),_vm._v(\" \"),(item.status === 2 || item.status === 3)?_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.gotoDelivery(item)}}},[_vm._v(\"查看物流\")]):_vm._e(),_vm._v(\" \"),(item.status === 0)?_c('x-button',{attrs:{\"type\":\"primary\",\"pill\":\"\",\"inline\":\"\",\"ghost\":\"\"},nativeOn:{\"click\":function($event){_vm.gotoPay(item)}}},[_vm._v(\"去付款\")]):_vm._e()],1):_vm._e()],2)})):_c('div',{staticClass:\"order-list--empty\"},[_c('p',{staticStyle:{\"color\":\"#999999\",\"padding-left\":\"0.48rem\",\"padding-bottom\":\"0.3rem\"}},[_vm._v(\"暂无数据\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-71735624\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/order/list.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71735624\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/order/list.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}