webpackJsonp([34],{S9fZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("4YfN"),n=i.n(s),r={data:function(){return{loading:!0,list:[],query:this.$route.query,defaultAddress:void 0}},computed:{canCreateCount:function(){return 10-this.list.length}},mounted:function(){this.fetchList()},methods:{fetchList:function(){var t=this;this.$http.withLoading("/api/user/address").then(function(e){t.loading=!1,t.list=e.list;var i=t.list.filter(function(t){return t.is_default})[0];i&&(t.defaultAddress=i.id)})},selectAddress:function(t){if(this.query.type){var e=n()({},this.query,{type:void 0,address_id:t.id});this.$router.replace({path:"/cart/order",query:e})}},setDefault:function(t,e){var i=this;e&&this.$http.withLoading({url:"/api/user/address/"+t.id,data:{is_default:1},method:"put"}).then(function(t){i.fetchList()})},editAddress:function(t){this.$router.push({path:"/my/address/edit",query:n()({},this.query,{id:t.id})})},createAddress:function(){this.$router.push({path:"/my/address/edit",query:this.query})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page address-list-page"},[t.loading?t._e():[t._l(t.list,function(e){return i("div",{staticClass:"address-item mgb"},[i("x-cell",{staticClass:"bdb"},[i("x-checkbox",{attrs:{value:t.defaultAddress===e.id},on:{input:function(i){t.setDefault(e,i)}}}),t._v(" "),i("span",{staticStyle:{"margin-left":"0.5em"}},[t._v("默认地址")]),t._v(" "),i("div",{attrs:{slot:"right"},slot:"right"},[i("x-button",{attrs:{pill:"",inline:""},nativeOn:{click:function(i){t.editAddress(e)}}},[t._v("编辑")]),t._v(" "),i("x-button",{attrs:{pill:"",inline:""},nativeOn:{click:function(i){t.delAddress(e)}}},[t._v("删除")])],1)],1),t._v(" "),i("x-cell",{nativeOn:{click:function(i){t.selectAddress(e)}}},[i("p",{staticStyle:{"margin-bottom":"0.32rem"}},[i("span",{staticStyle:{"margin-right":"2em"}},[t._v(t._s(e.consignee))]),i("span",[t._v(t._s(e.phone))])]),t._v(" "),i("p",[t._v(t._s(t._f("address")(e)))])])],1)}),t._v(" "),i("x-fixed-bottom",{staticStyle:{"font-size":"16px"}},[i("x-button",{attrs:{type:"primary",size:"full"},nativeOn:{click:function(e){t.createAddress(e)}}},[i("span",{staticStyle:{"margin-right":"1em"}},[t._v("+")]),t._v(" "),i("span",[t._v("还可添加 "+t._s(t.canCreateCount)+" 个收货地址")])])],1)]],2)},staticRenderFns:[]},d=i("/Xao")(r,a,!1,null,null,null);e.default=d.exports}});
//# sourceMappingURL=34.76315117d82d3cc49cbb.js.map