webpackJsonp([11],{Gbcb:function(t,i,e){var s=e("gg/B");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("8bSs")("7bb95d91",s,!0)},"gg/B":function(t,i,e){(t.exports=e("BkJT")(!0)).push([t.i,"\n.mint-popup-addr {\n  width: 100%;\n}\n.mint-popup-addr .picker-toolbar {\n  border-bottom: 1px solid #eaeaea;\n}\n.mint-popup-addr .picker-toolbar span {\n  font-size: 18px;\n  display: inline-block;\n  width: 60px;\n  text-align: center;\n  line-height: 40px;\n}\n","",{version:3,sources:["E:/dev/wemall/src/views/my/address-form.vue"],names:[],mappings:";AACA;EACE,YAAY;CACb;AACD;EACE,iCAAiC;CAClC;AACD;EACE,gBAAgB;EAChB,sBAAsB;EACtB,YAAY;EACZ,mBAAmB;EACnB,kBAAkB;CACnB",file:"address-form.vue",sourcesContent:["\n.mint-popup-addr {\n  width: 100%;\n}\n.mint-popup-addr .picker-toolbar {\n  border-bottom: 1px solid #eaeaea;\n}\n.mint-popup-addr .picker-toolbar span {\n  font-size: 18px;\n  display: inline-block;\n  width: 60px;\n  text-align: center;\n  line-height: 40px;\n}\n"],sourceRoot:""}])},qo9V:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("4YfN"),n=e.n(s),r={data:function(){return{id:this.$route.query.id,form:{phone:"",province:"",city:"",district:"",address:"",consignee:""},addrPickerVisible:!1,addrSlots:[{flex:1,values:[],className:"slot1",textAlign:"center"},{divider:!0,content:"-",className:"slot2"},{flex:1,values:[],className:"slot3",textAlign:"center"},{divider:!0,content:"-",className:"slot4"},{flex:1,values:[],className:"slot5",textAlign:"center"}],province:{id:0,name:""},city:{id:0,name:""},district:{id:0,name:""}}},computed:{addressText:function(){return[this.form.province,this.form.city,this.form.district].filter(function(t){return!!t}).join(" ")}},mounted:function(){this.id?this.fetchAddress():this.getArea(1)},methods:{fetchAddress:function(){var t=this;this.$http.withLoading("/api/user/address/"+this.id).then(function(i){t.form={phone:i.data.phone,province:i.data.province,city:i.data.city,district:i.data.district,address:i.data.address,consignee:i.data.consignee},t.province.name=i.data.province,t.city.name=i.data.city,t.district.name=i.data.district,t.getArea(1)})},getArea:function(t,i){var e=this;if(0===i)return!1;var s={};1===t?s.level=t:2===t?s.parent_id=i:3===t&&(s.parent_id=i),this.$http("/api/area",{params:s}).then(function(i){1===t?(e.province.list=i.list,e.addrSlots[0].values=e.province.list):2===t?(e.city.list=i.list,e.addrSlots[2].values=e.city.list):3===t&&(e.district.list=i.list,e.addrSlots[4].values=e.district.list)})},onAddressChange:function(t,i){i.length>0&&(i[0]&&this.province.id!==i[0].id?(this.province.id=i[0].id,this.province.name=i[0].name,this.getArea(2,this.province.id)):i[1]&&this.city.id!==i[1].id?(this.city.id=i[1].id,this.city.name=i[1].name,this.getArea(3,this.city.id)):i[2]&&this.district.id!==i[2].id&&(this.district.id=i[2].id,this.district.name=i[2].name))},addrCancel:function(){this.addrPickerVisible=!1},addrOk:function(){this.form.province=this.province.name,this.form.city=this.city.name,this.form.district=this.district.name,this.addrPickerVisible=!1},submit:function(){var t=this;if(!this.form.province)return this.$toast("请选择省份");if(!this.form.address)return this.$toast("请填写详细地址");if(!this.form.consignee)return this.$toast("请填写收货人");if(!/^1[0-9]{10}$/.test(this.form.phone))return this.$toast("手机号码格式有误");var i="/api/user/address",e="post",s=n()({},this.form,{is_default:0});this.id&&(i="/api/user/address/"+this.id,e="PUT",s.is_default=void 0),this.$http.withLoading({url:i,data:s,method:e}).then(function(i){t.$toast(t.id?"修改成功":"添加成功"),t.$router.back()})}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"page address-form-page"},[e("form",{staticClass:"address-form"},[e("x-field",{staticClass:"bdb",attrs:{placeholder:"收货人"},model:{value:t.form.consignee,callback:function(i){t.$set(t.form,"consignee","string"==typeof i?i.trim():i)},expression:"form.consignee"}}),t._v(" "),e("x-field",{staticClass:"bdb",attrs:{placeholder:"手机号码"},model:{value:t.form.phone,callback:function(i){t.$set(t.form,"phone","string"==typeof i?i.trim():i)},expression:"form.phone"}}),t._v(" "),e("x-field",{staticClass:"bdb",attrs:{placeholder:"选择地区",value:t.addressText,disabled:""},nativeOn:{click:function(i){t.addrPickerVisible=!0}}},[e("x-icon",{attrs:{slot:"extra",type:"next_page"},slot:"extra"})],1),t._v(" "),e("x-field",{staticClass:"bdb",attrs:{placeholder:"详细地址"},model:{value:t.form.address,callback:function(i){t.$set(t.form,"address","string"==typeof i?i.trim():i)},expression:"form.address"}})],1),t._v(" "),e("x-fixed-bottom",[e("x-button",{attrs:{size:"full",type:"primary"},nativeOn:{click:function(i){t.submit(i)}}},[t._v(t._s(t.id?"确认修改":"确认添加"))])],1),t._v(" "),e("mt-popup",{staticClass:"mint-popup-addr",attrs:{position:"bottom"},model:{value:t.addrPickerVisible,callback:function(i){t.addrPickerVisible=i},expression:"addrPickerVisible"}},[e("mt-picker",{attrs:{slots:t.addrSlots,"value-key":"name",showToolbar:!0},on:{change:t.onAddressChange}},[e("div",[e("span",{staticClass:"pull-left",on:{click:t.addrCancel}},[t._v("取消")]),t._v(" "),e("span",{staticClass:"pull-right",on:{click:t.addrOk}},[t._v("确定")])])])],1)],1)},staticRenderFns:[]},d=e("/Xao")(r,a,!1,function(t){e("Gbcb")},null,null);i.default=d.exports}});
//# sourceMappingURL=11.3307ccf5b180e9555f74.js.map