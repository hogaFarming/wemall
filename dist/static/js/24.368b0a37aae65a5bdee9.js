webpackJsonp([24],{"4aq9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{pageType:+this.$route.query.type,data:null,goodsId:+this.$route.query.goodsid,refundType:1,refundReason:0,hasReceived:0,refundAmount:void 0,remark:"",images:[],allReasons:[]}},computed:{reasonOptions:function(){var e=[],t=this.allReasons[this.refundType-1]||{};for(var a in t)e.push({label:t[a],value:+a});return e}},mounted:function(){this.fetchRefundData(),this.fetchRefundResons()},methods:{fetchRefundData:function(){var e=this;this.$http.withLoading("/api/order/refund/confirms/"+this.goodsId).then(function(t){e.data=t.data})},fetchRefundResons:function(){var e=this;this.$http("/api/order/refund/reason").then(function(t){e.allReasons=t.list})},submit:function(){var e=this,t=this.validateForm();if(t)return this.$toast(t);var a={type:this.refundType,order_goods_id:this.goodsId,reason_id:this.refundReason,is_receiving:this.hasReceived,desc:this.remark||void 0};2===this.refundType||this.hasReceived?a.required_amount=this.data.refund_amount:this.refundAmount&&(a.required_amount=100*this.refundAmount),this.$messagebox.confirm("确认提交申请吗？").then(function(t){"cancel"!==t&&e.$http.withLoading({url:"/api/order/refunds",data:a,method:"post"}).then(function(t){e.$toast("提交成功"),location.href="/refund/"+e.goodsId})})},validateForm:function(){return this.refundReason?1!==this.refundType||this.hasReceived||2!==this.pageType||this.refundAmount?"":"请输入退款金额":"退款原因不能为空"}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page refund-form-page"},[e.data?[a("x-radio-select",{staticClass:"mgb",attrs:{title:"退款类型",options:[{label:"我要退款",value:1,secondary:"无需退货"},{label:"我要退货",value:2}]},model:{value:e.refundType,callback:function(t){e.refundType=t},expression:"refundType"}}),e._v(" "),a("x-radio-select",{staticClass:"mgb",attrs:{title:"收货状态",options:[{label:"未收到货",value:0},{label:"已收到货",value:1}]},model:{value:e.hasReceived,callback:function(t){e.hasReceived=t},expression:"hasReceived"}}),e._v(" "),a("x-select",{staticClass:"mgb",attrs:{title:"退款原因",options:e.reasonOptions},model:{value:e.refundReason,callback:function(t){e.refundReason=t},expression:"refundReason"}}),e._v(" "),a("x-field",{staticClass:"mgb",attrs:{label:"退款金额"},model:{value:e.refundAmount,callback:function(t){e.refundAmount=t},expression:"refundAmount"}}),e._v(" "),a("x-field",{staticClass:"mgb",attrs:{label:"退款备注",placeholder:"选填",attr:{maxlength:100}},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),e._v(" "),a("x-cell",[a("div",{staticClass:"mgb"},[e._v("上传凭证：")]),e._v(" "),a("x-image-upload",{attrs:{limit:3}})],1),e._v(" "),a("x-fixed-bottom",[a("x-button",{attrs:{type:"primary",size:"full"},nativeOn:{click:function(t){e.submit(t)}}},[e._v("提交")])],1)]:e._e()],2)},staticRenderFns:[]},i=a("/Xao")(n,s,!1,null,null,null);t.default=i.exports}});
//# sourceMappingURL=24.368b0a37aae65a5bdee9.js.map