{"version":3,"sources":["webpack:///src/views/product/comments.vue","webpack:///./src/views/product/comments.vue?9292","webpack:///./src/views/product/comments.vue"],"names":["comments","id","nextPage","queryList","fetchStats","_this","this","goodsId","data","next_page_url","_this2","message","product_comments","render","_h","$createElement","_c","_self","staticClass","_v","domProps","innerHTML","_s","goodsPercent","stats","count","good_colmment","medium_colmment","bad_colmment","image_num","directives","name","rawName","value","expression","attrs","infinite-scroll-disabled","infinite-scroll-distance","_l","comment","key","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"wGA0BA,IAAAA,qDAIAC,YACA,iBAGA,uHAIA,oDAGAC,mCAIAC,iBACAC,+DAIAF,iCAEA,IAAAG,EAAAC,sBAGAC,yHAGAC,iCAEAA,wBAEAC,uCAGA,IAAAC,EAAAJ,sBACAC,gFAEAC,6BAEAG,cCnEAC,GADiBC,OAFjB,WAA0B,IAAaC,EAAbR,KAAaS,eAA0BC,EAAvCV,KAAuCW,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,+BAAhFZ,KAAyH,OAAAU,EAAA,UAAzHV,KAAyHa,GAAA,QAAAH,EAAA,QAAsDI,UAAUC,UAAzLf,KAAyLgB,GAAzLhB,KAAyLiB,iBAAzLjB,KAA+Na,GAAA,OAA/Nb,KAA+Na,GAAA,KAAAH,EAAA,OAAsCE,YAAA,cAAwBF,EAAA,MAAAA,EAAA,MAA7RV,KAA6Ra,GAAA,QAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,IAA7Rb,KAA6RgB,GAA7RhB,KAA6RkB,MAAAC,OAAA,OAA7RnB,KAA6Ra,GAAA,KAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,MAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,IAA7Rb,KAA6RgB,GAA7RhB,KAA6RkB,MAAAE,eAAA,OAA7RpB,KAA6Ra,GAAA,KAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,MAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,IAA7Rb,KAA6RgB,GAA7RhB,KAA6RkB,MAAAG,iBAAA,OAA7RrB,KAA6Ra,GAAA,KAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,MAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,IAA7Rb,KAA6RgB,GAA7RhB,KAA6RkB,MAAAI,cAAA,OAA7RtB,KAA6Ra,GAAA,KAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,MAAAH,EAAA,MAA7RV,KAA6Ra,GAAA,IAA7Rb,KAA6RgB,GAA7RhB,KAA6RkB,MAAAK,WAAA,WAA7RvB,KAA6Ra,GAAA,KAAAH,EAAA,MAAgec,aAAaC,KAAA,kBAAAC,QAAA,oBAAAC,MAA1wB3B,KAA0wB,SAAA4B,WAAA,aAA8FhB,YAAA,eAAAiB,OAAoCC,2BAAA,yBAAAC,2BAAA,OAA54B/B,KAAi+BgC,GAAj+BhC,KAAi+B,cAAAiC,GAAqC,OAAAvB,EAAA,MAAgBwB,IAAAD,EAAAtC,GAAAiB,YAAA,QAAiCF,EAAA,gBAAqBmB,OAAO3B,KAAA+B,MAAgB,OAAnmCjC,KAAymCmC,MAAA,IAElnCC,oBCWjBC,EAbAC,EAAA,OAaAC,CACA7C,EACAY,GATA,EAEA,KAEA,KAEA,MAUAkC,EAAA,QAAAH,EAAA","file":"static/js/22.b8dd2724bec24eb8f4b5.js","sourcesContent":["<template>\n  <div class=\"page product-comments-page\">\n    <template v-if=\"stats\">\n      <x-cell>好评度 <span v-html=\"goodsPercent\"></span>%</x-cell>\n      <div class=\"mod grade\">\n        <ul>\n          <li>全部评价<br>({{ stats.count }})</li>\n          <li>好评<br>({{ stats.good_colmment }})</li>\n          <li>中评<br>({{ stats.medium_colmment }})</li>\n          <li>差评<br>({{ stats.bad_colmment }})</li>\n          <li>晒图<br>({{ stats.image_num }})</li>\n        </ul>\n      </div>\n      <ul\n        class=\"comment-list\"\n        v-infinite-scroll=\"loadMore\"\n        infinite-scroll-disabled=\"infiniteScrollDisabled\"\n        infinite-scroll-distance=\"10\">\n        <li v-for=\"comment in list\" :key=\"comment.id\" class=\"mgb\">\n          <comment-item :data=\"comment\"></comment-item>\n        </li>\n      </ul>\n    </template>\n  </div>\n</template>\n<script>\n  export default {\n    data () {\n      return {\n        goodsId: this.$route.params.id,\n        nextPage: '',\n        list: [],\n        stats: null\n      }\n    },\n    computed: {\n      goodsPercent () {\n        return parseInt(parseInt(this.stats.good_colmment) / parseInt(this.stats.count) * 100)\n      },\n      infiniteScrollDisabled () {\n        return !this.nextPage\n      }\n    },\n    mounted () {\n      this.queryList()\n      this.fetchStats()\n    },\n    methods: {\n      loadMore () {\n        this.queryList(this.nextPage)\n      },\n      queryList (nextPage) {\n        const params = {\n          goods_id: this.goodsId\n        }\n        this.$http.withLoading('/api/goods/comments', { params }).then(res => {\n          if (res.list.current_page === 1) {\n            this.list = res.list.data\n          } else {\n            this.list = this.list.concat(res.list.data)\n          }\n          this.nextPage = res.list.next_page_url\n        })\n      },\n      fetchStats () {\n        const params = { goods_id: this.goodsId }\n        this.$http('/api/comments/data', { params }).then(res => {\n          this.stats = res.data\n        }, err => {\n          this.$toast(err.message)\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/product/comments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page product-comments-page\"},[(_vm.stats)?[_c('x-cell',[_vm._v(\"好评度 \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.goodsPercent)}}),_vm._v(\"%\")]),_vm._v(\" \"),_c('div',{staticClass:\"mod grade\"},[_c('ul',[_c('li',[_vm._v(\"全部评价\"),_c('br'),_vm._v(\"(\"+_vm._s(_vm.stats.count)+\")\")]),_vm._v(\" \"),_c('li',[_vm._v(\"好评\"),_c('br'),_vm._v(\"(\"+_vm._s(_vm.stats.good_colmment)+\")\")]),_vm._v(\" \"),_c('li',[_vm._v(\"中评\"),_c('br'),_vm._v(\"(\"+_vm._s(_vm.stats.medium_colmment)+\")\")]),_vm._v(\" \"),_c('li',[_vm._v(\"差评\"),_c('br'),_vm._v(\"(\"+_vm._s(_vm.stats.bad_colmment)+\")\")]),_vm._v(\" \"),_c('li',[_vm._v(\"晒图\"),_c('br'),_vm._v(\"(\"+_vm._s(_vm.stats.image_num)+\")\")])])]),_vm._v(\" \"),_c('ul',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"comment-list\",attrs:{\"infinite-scroll-disabled\":\"infiniteScrollDisabled\",\"infinite-scroll-distance\":\"10\"}},_vm._l((_vm.list),function(comment){return _c('li',{key:comment.id,staticClass:\"mgb\"},[_c('comment-item',{attrs:{\"data\":comment}})],1)}))]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-78604909\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/product/comments.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./comments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78604909\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./comments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/product/comments.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}