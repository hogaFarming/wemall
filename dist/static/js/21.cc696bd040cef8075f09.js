webpackJsonp([21],{"9E3I":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e={data:function(){return{goodsId:this.$route.params.id,nextPage:"",list:[],stats:null}},computed:{goodsPercent:function(){return parseInt(parseInt(this.stats.good_colmment)/parseInt(this.stats.count)*100)},infiniteScrollDisabled:function(){return!this.nextPage}},mounted:function(){this.queryList(),this.fetchStats()},methods:{loadMore:function(){this.queryList(this.nextPage)},queryList:function(t){var s=this,i={goods_id:this.goodsId};this.$http.withLoading("/api/goods/comments",{params:i}).then(function(t){1===t.list.current_page?s.list=t.list.data:s.list=s.list.concat(t.list.data),s.nextPage=t.list.next_page_url})},fetchStats:function(){var t=this,s={goods_id:this.goodsId};this.$http("/api/comments/data",{params:s}).then(function(s){t.stats=s.data},function(s){t.$toast(s.message)})}}},n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"page product-comments-page"},[this.stats?[s("x-cell",[this._v("好评度 "),s("span",{domProps:{innerHTML:this._s(this.goodsPercent)}}),this._v("%")]),this._v(" "),s("div",{staticClass:"mod grade"},[s("ul",[s("li",[this._v("全部评价"),s("br"),this._v("("+this._s(this.stats.count)+")")]),this._v(" "),s("li",[this._v("好评"),s("br"),this._v("("+this._s(this.stats.good_colmment)+")")]),this._v(" "),s("li",[this._v("中评"),s("br"),this._v("("+this._s(this.stats.medium_colmment)+")")]),this._v(" "),s("li",[this._v("差评"),s("br"),this._v("("+this._s(this.stats.bad_colmment)+")")]),this._v(" "),s("li",[this._v("晒图"),s("br"),this._v("("+this._s(this.stats.image_num)+")")])])]),this._v(" "),s("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:this.loadMore,expression:"loadMore"}],staticClass:"comment-list",attrs:{"infinite-scroll-disabled":"infiniteScrollDisabled","infinite-scroll-distance":"10"}},this._l(this.list,function(t){return s("li",{key:t.id,staticClass:"mgb"},[s("comment-item",{attrs:{data:t}})],1)}))]:this._e()],2)},staticRenderFns:[]},a=i("/Xao")(e,n,!1,null,null,null);s.default=a.exports}});
//# sourceMappingURL=21.cc696bd040cef8075f09.js.map