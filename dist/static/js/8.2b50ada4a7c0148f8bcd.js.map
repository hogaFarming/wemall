{"version":3,"sources":["webpack:///./src/views/cart/pay.vue?47ad","webpack:///src/views/cart/pay.vue","webpack:///./src/views/cart/pay.vue?9388","webpack:///./src/views/cart/pay.vue","webpack:///./src/views/cart/pay.vue?2369"],"names":["content","__webpack_require__","module","i","locals","exports","pay","orderid","isWeChat","fetchOrderData","_this","this","data","paid_price","wechatpay","_this2","orderId","then","res","package","cart_pay","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","slot","value","orderData","actual_price","color","pay_amount","size","options","payWays","model","callback","$$v","selectedPayWay","expression","staticStyle","margin","type","pill","nativeOn","click","$event","confirmPay","modalVisible","confirm-text","on","confirm","onModalConfirm","cancel","onModalCancel","text-align","src","alt","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"yCAGA,IAAAA,EAAAC,EAAA,QACA,iBAAAD,QAAAE,EAAAC,EAAAH,EAAA,MACAA,EAAAI,SAAAF,EAAAG,QAAAL,EAAAI,QAEAH,EAAA,OAAAA,CAAA,WAAAD,GAAA,yFCkCA,IAAAM,oDAIAC,kDAEA,6BACA,uBACAC,yBAEA,4BAGAC,qDAGA,IAAAC,EAAAC,wFAEAC,uDAEAC,yCAIAC,kCAEA,IAAAC,EAAAJ,iCAEA,6BAEA,mBACA,oBAEAK,WANAC,KAAA,SAAAC,QAQA,SACAN,4HAKAO,+CAJA,SAAAD,gGASAF,+EAEA,gEASA,+CAGA,KClGAI,GADiBC,OAFjB,WAA0B,IAAAC,EAAAX,KAAaY,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAA8BE,YAAA,QAAkBL,EAAAM,GAAA,cAAAH,EAAA,WAAqCI,OAAOC,KAAA,QAAAC,MAAAT,EAAAU,UAAAC,aAAAC,MAAA,OAAgEJ,KAAA,WAAc,GAAAR,EAAAM,GAAA,KAAAH,EAAA,UAAAH,EAAAM,GAAA,eAAAH,EAAA,WAAmEI,OAAOE,MAAAT,EAAAU,UAAAG,WAAAC,KAAA,YAAiD,GAAAd,EAAAM,GAAA,KAAAH,EAAA,kBAAuCI,OAAOQ,QAAAf,EAAAgB,SAAsBC,OAAQR,MAAAT,EAAA,eAAAkB,SAAA,SAAAC,GAAoDnB,EAAAoB,eAAAD,GAAuBE,WAAA,oBAA8BrB,EAAAM,GAAA,KAAAH,EAAA,OAAwBmB,aAAaC,OAAA,uBAA8BpB,EAAA,YAAiBI,OAAOO,KAAA,OAAAU,KAAA,UAAAC,KAAA,IAAyCC,UAAWC,MAAA,SAAAC,GAAyB5B,EAAA6B,WAAAD,OAAyB5B,EAAAM,GAAA,cAAAN,EAAAM,GAAA,KAAAH,EAAA,WAAiDE,YAAA,mBAAAE,OAAsCE,MAAAT,EAAA8B,aAAAC,eAAA,QAA+CC,IAAKC,QAAAjC,EAAAkC,eAAAC,OAAAnC,EAAAoC,iBAAyDjC,EAAA,OAAYmB,aAAae,aAAA,YAAuBlC,EAAA,OAAYI,OAAO+B,IAAA,+BAAAC,IAAA,QAAiDvC,EAAAM,GAAA,KAAAH,EAAA,MAAAH,EAAAM,GAAA,KAAAH,EAAA,QAAAH,EAAAM,GAAA,aAAAN,EAAAM,GAAA,KAAAH,EAAA,MAAAH,EAAAM,GAAA,KAAAH,EAAA,KAAAH,EAAAM,GAAA,uBAAAH,EAAA,MAAAH,EAAAM,GAAA,0BAAAH,EAAA,MAAAH,EAAAM,GAAA,wBAAAH,EAAA,MAAAH,EAAAM,GAAA,mBAAAH,EAAA,MAAAA,EAAA,MAAAH,EAAAM,GAAA,wCAAAH,EAAA,MAAAA,EAAA,MAAAH,EAAAM,GAAA,uDAE3hCkC,oBCcjBC,EAbA9D,EAAA,OAaA+D,CACA1D,EACAc,GATA,EATA,SAAA6C,GACAhE,EAAA,SAYA,KAEA,MAUAiE,EAAA,QAAAH,EAAA,iCCzBA7D,EAAAG,QAAAJ,EAAA,OAAAA,EAAA,IAKAkE,MAAAjE,EAAAC,EAAA,qCAA0D,IAAUiE,QAAA,EAAAC,SAAA,wCAAAC,SAAAC,SAAA,0BAAwGC,KAAA,UAAAC,gBAAA,sCAA2EC,WAAA","file":"static/js/8.2b50ada4a7c0148f8bcd.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6309793d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./pay.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"e4241e30\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6309793d\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/cart/pay.vue\n// module id = 2fXs\n// module chunks = 8","<template>\n  <div>\n    <x-cell class=\"mgb\">订单总价\n      <x-money :value=\"orderData.actual_price\" color=\"red\" slot=\"right\"></x-money>\n    </x-cell>\n    <x-cell>还需要支付\n      <x-money :value=\"orderData.pay_amount\" size=\"small\"></x-money>\n    </x-cell>\n    <x-radio-select v-model=\"selectedPayWay\" :options=\"payWays\"></x-radio-select>\n    <div style=\"margin: 1.0667rem 0.75rem;\">\n      <x-button size=\"full\" type=\"primary\" pill @click.native=\"confirmPay\">确认支付</x-button>\n    </div>\n    <x-modal\n      class=\"pay-result-modal\"\n      :value=\"modalVisible\"\n      confirm-text=\"继续支付\"\n      @confirm=\"onModalConfirm\"\n      @cancel=\"onModalCancel\">\n      <div style=\"text-align: center;\">\n        <img src=\"/static/icon/pay_failure.png\" alt=\"图片\">\n        <br>\n        <span>支付失败！</span>\n      </div>\n      <br>\n      <p>\n        可能由以下原因造成： <br>\n        1、网络信号差或请求超时； <br>\n        2、意外关闭支付页面； <br>\n        3、其他原因 <br><br>\n        建议您换个网络环境尝试重新支付，如果还是失败可咨询客服。<br><br>\n        订单号：2017 0401 1010 1612 1270\n      </p>\n    </x-modal>\n  </div>\n</template>\n<style>\n  .page {\n    font-size: 14px;\n  }\n</style>\n<script>\n  export default {\n    data: function () {\n      return {\n        orderId: this.$route.query.orderid,\n        orderData: {},\n        payWays: [{label: '微信支付', value: 'wechatpay'}],\n        selectedPayWay: 1,\n        isWeChat: this.$utils.isWeChat(),\n        modalVisible: false\n      }\n    },\n    mounted () {\n      this.fetchOrderData()\n    },\n    methods: {\n      fetchOrderData () {\n        this.$http.withLoading(`/api/orders/${this.orderId}`).then(res => {\n          this.orderData = res.data\n          // TODO 哪个金额\n          this.orderData.pay_amount = res.data.actual_price - res.data.paid_price\n        })\n      },\n      confirmPay () {\n        this.wechatpay()\n      },\n      wechatpay () {\n        this.$http.withLoading({\n          url: '/api/order/pays',\n          data: {\n            type: 'wechatpay',\n            device: 'wap',\n            order_id: this.orderId\n          }\n        }).then(res => {\n          if (res) {\n            const data = res.data\n            window.WeixinJSBridge.invoke('getBrandWCPayRequest', {\n              appId: data.appId,           // 公众号名称，由商户传入\n              timeStamp: data.timeStamp,   // 时间戳，自1970年以来的秒数\n              nonceStr: data.nonceStr,     // 随机串\n              package: data.package,\n              signType: data.signType,     // 微信签名方式：\n              paySign: data.paySign        // 微信签名\n            }, res => {\n              if (res.err_msg === 'get_brand_wcpay_request:ok') {\n                window.location.href = '/order/paystatus?order_id=' + this.orderId\n              } else if (res.err_msg === 'get_brand_wcpay_request:cancel') {\n                window.location.href = '/order/paystatus?order_id=' + this.orderId + '&status=0'\n              } else {\n                window.location.href = '/order/paystatus?order_id=' + this.orderId + '&status=0'\n              }\n            })\n          }\n        })\n      },\n      onModalConfirm () {\n        this.modalVisible = false\n      },\n      onModalCancel () {\n        this.modalVisible = false\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/cart/pay.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('x-cell',{staticClass:\"mgb\"},[_vm._v(\"订单总价\\n    \"),_c('x-money',{attrs:{\"slot\":\"right\",\"value\":_vm.orderData.actual_price,\"color\":\"red\"},slot:\"right\"})],1),_vm._v(\" \"),_c('x-cell',[_vm._v(\"还需要支付\\n    \"),_c('x-money',{attrs:{\"value\":_vm.orderData.pay_amount,\"size\":\"small\"}})],1),_vm._v(\" \"),_c('x-radio-select',{attrs:{\"options\":_vm.payWays},model:{value:(_vm.selectedPayWay),callback:function ($$v) {_vm.selectedPayWay=$$v},expression:\"selectedPayWay\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"1.0667rem 0.75rem\"}},[_c('x-button',{attrs:{\"size\":\"full\",\"type\":\"primary\",\"pill\":\"\"},nativeOn:{\"click\":function($event){_vm.confirmPay($event)}}},[_vm._v(\"确认支付\")])],1),_vm._v(\" \"),_c('x-modal',{staticClass:\"pay-result-modal\",attrs:{\"value\":_vm.modalVisible,\"confirm-text\":\"继续支付\"},on:{\"confirm\":_vm.onModalConfirm,\"cancel\":_vm.onModalCancel}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('img',{attrs:{\"src\":\"/static/icon/pay_failure.png\",\"alt\":\"图片\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(\"支付失败！\")])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      可能由以下原因造成： \"),_c('br'),_vm._v(\"\\n      1、网络信号差或请求超时； \"),_c('br'),_vm._v(\"\\n      2、意外关闭支付页面； \"),_c('br'),_vm._v(\"\\n      3、其他原因 \"),_c('br'),_c('br'),_vm._v(\"\\n      建议您换个网络环境尝试重新支付，如果还是失败可咨询客服。\"),_c('br'),_c('br'),_vm._v(\"\\n      订单号：2017 0401 1010 1612 1270\\n    \")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6309793d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/cart/pay.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6309793d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./pay.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./pay.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6309793d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./pay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/cart/pay.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.page {\\n  font-size: 14px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/dev/wemall/src/views/cart/pay.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,gBAAgB;CACjB\",\"file\":\"pay.vue\",\"sourcesContent\":[\"\\n.page {\\n  font-size: 14px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6309793d\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/cart/pay.vue\n// module id = hG+E\n// module chunks = 8"],"sourceRoot":""}