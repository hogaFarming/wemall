webpackJsonp([5],{"9Wp7":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{orderId:this.$route.query.orderid,orderData:{},payWays:[{label:"微信支付",value:"wechatpay"}],selectedPayWay:1,isWeChat:this.$utils.isWeChat(),modalVisible:!1}},mounted:function(){this.fetchOrderData()},methods:{fetchOrderData:function(){var a=this;this.$http.withLoading("/api/orders/"+this.orderId).then(function(t){a.orderData=t.data,a.orderData.pay_amount=t.data.actual_price-t.data.paid_price})},confirmPay:function(){this.wechatpay()},wechatpay:function(){var a=this;this.$http.withLoading({url:"/api/order/pays",method:"post",data:{type:"wechatpay",device:"wap",order_id:this.orderId}}).then(function(t){if(t){var e=t.data;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(t){"get_brand_wcpay_request:ok"===t.err_msg?window.location.href="/order/paystatus?order_id="+a.orderId:"get_brand_wcpay_request:cancel"===t.err_msg||(a.modalVisible=!0)})}})},onModalConfirm:function(){this.modalVisible=!1},onModalCancel:function(){this.modalVisible=!1}}},r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("x-cell",{staticClass:"mgb"},[a._v("订单总价\n    "),e("x-money",{attrs:{slot:"right",value:a.orderData.actual_price,color:"red"},slot:"right"})],1),a._v(" "),e("x-cell",[a._v("还需要支付\n    "),e("x-money",{attrs:{value:a.orderData.pay_amount,size:"small"}})],1),a._v(" "),e("x-radio-select",{attrs:{options:a.payWays},model:{value:a.selectedPayWay,callback:function(t){a.selectedPayWay=t},expression:"selectedPayWay"}}),a._v(" "),e("div",{staticStyle:{margin:"1.0667rem 0.75rem"}},[e("x-button",{attrs:{size:"full",type:"primary",pill:""},nativeOn:{click:function(t){a.confirmPay(t)}}},[a._v("确认支付")])],1),a._v(" "),e("x-modal",{staticClass:"pay-result-modal",attrs:{value:a.modalVisible,"confirm-text":"继续支付"},on:{confirm:a.onModalConfirm,cancel:a.onModalCancel}},[e("div",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:"/static/icon/pay_failure.png",alt:"图片"}}),a._v(" "),e("br"),a._v(" "),e("span",[a._v("支付失败！")])]),a._v(" "),e("br"),a._v(" "),e("p",[a._v("\n      可能由以下原因造成： "),e("br"),a._v("\n      1、网络信号差或请求超时； "),e("br"),a._v("\n      2、意外关闭支付页面； "),e("br"),a._v("\n      3、其他原因 "),e("br"),e("br"),a._v("\n      建议您换个网络环境尝试重新支付，如果还是失败可咨询客服。"),e("br"),e("br"),a._v("\n      订单号：2017 0401 1010 1612 1270\n    ")])])],1)},staticRenderFns:[]},i=e("/Xao")(n,r,!1,function(a){e("t9aj")},null,null);t.default=i.exports},t9aj:function(a,t,e){var n=e("yfuu");"string"==typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);e("8bSs")("9a2d0fb4",n,!0)},yfuu:function(a,t,e){(a.exports=e("BkJT")(!0)).push([a.i,"\n.page {\n  font-size: 14px;\n}\n","",{version:3,sources:["E:/dev/wemall/src/views/cart/pay.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB",file:"pay.vue",sourcesContent:["\n.page {\n  font-size: 14px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=5.624dc9c23174a9b5cf40.js.map