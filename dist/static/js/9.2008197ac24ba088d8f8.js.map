{"version":3,"sources":["webpack:///src/views/my/my-views.vue","webpack:///./src/views/my/my-views.vue?cbce","webpack:///./src/views/my/my-views.vue","webpack:///./src/views/my/my-views.vue?2a2d","webpack:///./src/views/my/my-views.vue?ce03"],"names":["my_views","_this","this","id","length","ret","queryList","_this2","list","_this3","then","res","isEdit","_this4","key","selectedItems","extends_default","defineProperty_default","val","my_my_views","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","itemTotal","attrs","slot","inline","pill","nativeOn","click","$event","toggleEdit","loading","_e","_l","item","staticStyle","margin","font-size","color","month","goods","pic","cover","pic-height","name","value","price","on","input","toggleSelect","width","height","type","deleteGoods","_m","$router","push","path","isAllSelected","toggleSelectAll","deleteAll","staticRenderFns","src","alt","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","content","module","i","locals","exports","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/9.2008197ac24ba088d8f8.js","sourcesContent":["<template>\n  <div class=\"page my-views-page\">\n    <x-cell>\n      共找到{{ itemTotal }}个足迹\n      <x-button slot=\"right\" @click.native=\"toggleEdit\" inline pill>{{ isEdit ? '完成' : '编辑' }}</x-button>\n    </x-cell>\n    <template v-if=\"!loading\">\n      <div v-if=\"list.length\">\n        <div v-for=\"item in list\">\n          <div style=\"margin: 0.3733rem 0.48rem;font-size: 12px;color: #999999\">{{ item.month }}</div>\n          <x-card-list>\n            <x-card v-for=\"goods in item.list\" :key=\"goods.id\" :pic=\"goods.cover\" pic-height=\"4.2667rem\">\n              <span>{{ goods.name }}</span>\n              <x-money :value=\"goods.price\" slot=\"meta\"></x-money>\n              <div slot=\"extra\">\n                <x-checkbox v-if=\"isEdit\" :value=\"selectedItems[goods.id]\" @input=\"toggleSelect(goods.id)\"></x-checkbox>\n                <x-icon v-else type=\"delete_goods\" @click.native=\"deleteGoods(goods.id)\" style=\"width: 25px;height: 25px;\"></x-icon>\n              </div>\n            </x-card>\n          </x-card-list>\n        </div>\n      </div>\n      <div v-else class=\"page-empty\">\n        <p class=\"page-empty-img\"><img src=\"/static/icon/ic_footstep.png\" alt=\"icon\"></p>\n        <p class=\"page-empty-text\">一个足迹都没有，快去寻找你喜欢的商品吧！</p>\n        <x-button class=\"page-empty-btn\" @click.native=\"$router.push({ path: '/product/list' })\" type=\"primary\" inline pill>随便逛逛</x-button>\n      </div>\n      <x-fixed-bottom v-if=\"isEdit\" style=\"font-size: 14px;\">\n        <x-cell slot=\"content\">\n          <x-checkbox :value=\"isAllSelected\" @input=\"toggleSelectAll\"></x-checkbox>\n          <span>全选</span>\n        </x-cell>\n        <x-button type=\"primary\" @click.native=\"deleteAll\">删除</x-button>\n      </x-fixed-bottom>\n    </template>\n  </div>\n</template>\n<script>\n  export default {\n    data () {\n      return {\n        loading: true,\n        isEdit: false,\n        list: [],\n        selectedItems: {}\n      }\n    },\n    computed: {\n      isAllSelected () {\n        const result = this.list.every(item => item.list.every(i => !!this.selectedItems[i.id]))\n        return result\n      },\n      itemTotal () {\n        if (!this.list) return 0\n        let ret = 0\n        this.list.forEach(item => {\n          ret += item.list.length\n        })\n        return ret\n      }\n    },\n    mounted () {\n      this.queryList()\n    },\n    methods: {\n      queryList () {\n        this.$http.withLoading('/api/history/goodses').then(res => {\n          this.loading = false\n          this.list = res.list\n        })\n      },\n      deleteGoods (id) {\n        this.$http.withLoading({\n          url: '/api/history/goodses',\n          data: { history_ids: id },\n          method: 'delete'\n        }).then(res => {\n          this.$toast('删除成功')\n          this.queryList()\n        })\n      },\n      toggleEdit () {\n        this.isEdit = !this.isEdit\n      },\n      deleteAll () {\n        const ids = Object.keys(this.selectedItems).filter(key => this.selectedItems[key])\n        if (!ids.length) return this.$toast('未选中足迹')\n        this.$messagebox.confirm('确认删除足迹?').then(action => {\n          if (action === 'cancel') return\n          this.$http.withLoading({\n            url: '/api/history/goodses',\n            data: { history_ids: ids.join(',') },\n            method: 'delete'\n          }).then(res => {\n            this.$toast('删除成功')\n            this.queryList()\n            this.isEdit = false\n          })\n        })\n      },\n      toggleSelect (id) {\n        this.selectedItems = {\n          ...this.selectedItems,\n          [id]: !this.selectedItems[id]\n        }\n      },\n      toggleSelectAll (val) {\n        const selectedItems = {}\n        this.list.forEach(item => {\n          item.list.forEach(i => {\n            selectedItems[i.id] = val\n          })\n        })\n        this.selectedItems = selectedItems\n      }\n    }\n  }\n</script>\n<style>\n  .page {\n    font-size: 14px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/my-views.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page my-views-page\"},[_c('x-cell',[_vm._v(\"\\n    共找到\"+_vm._s(_vm.itemTotal)+\"个足迹\\n    \"),_c('x-button',{attrs:{\"slot\":\"right\",\"inline\":\"\",\"pill\":\"\"},nativeOn:{\"click\":function($event){_vm.toggleEdit($event)}},slot:\"right\"},[_vm._v(_vm._s(_vm.isEdit ? '完成' : '编辑'))])],1),_vm._v(\" \"),(!_vm.loading)?[(_vm.list.length)?_c('div',_vm._l((_vm.list),function(item){return _c('div',[_c('div',{staticStyle:{\"margin\":\"0.3733rem 0.48rem\",\"font-size\":\"12px\",\"color\":\"#999999\"}},[_vm._v(_vm._s(item.month))]),_vm._v(\" \"),_c('x-card-list',_vm._l((item.list),function(goods){return _c('x-card',{key:goods.id,attrs:{\"pic\":goods.cover,\"pic-height\":\"4.2667rem\"}},[_c('span',[_vm._v(_vm._s(goods.name))]),_vm._v(\" \"),_c('x-money',{attrs:{\"slot\":\"meta\",\"value\":goods.price},slot:\"meta\"}),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[(_vm.isEdit)?_c('x-checkbox',{attrs:{\"value\":_vm.selectedItems[goods.id]},on:{\"input\":function($event){_vm.toggleSelect(goods.id)}}}):_c('x-icon',{staticStyle:{\"width\":\"25px\",\"height\":\"25px\"},attrs:{\"type\":\"delete_goods\"},nativeOn:{\"click\":function($event){_vm.deleteGoods(goods.id)}}})],1)],1)}))],1)})):_c('div',{staticClass:\"page-empty\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('p',{staticClass:\"page-empty-text\"},[_vm._v(\"一个足迹都没有，快去寻找你喜欢的商品吧！\")]),_vm._v(\" \"),_c('x-button',{staticClass:\"page-empty-btn\",attrs:{\"type\":\"primary\",\"inline\":\"\",\"pill\":\"\"},nativeOn:{\"click\":function($event){_vm.$router.push({ path: '/product/list' })}}},[_vm._v(\"随便逛逛\")])],1),_vm._v(\" \"),(_vm.isEdit)?_c('x-fixed-bottom',{staticStyle:{\"font-size\":\"14px\"}},[_c('x-cell',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('x-checkbox',{attrs:{\"value\":_vm.isAllSelected},on:{\"input\":_vm.toggleSelectAll}}),_vm._v(\" \"),_c('span',[_vm._v(\"全选\")])],1),_vm._v(\" \"),_c('x-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.deleteAll($event)}}},[_vm._v(\"删除\")])],1):_vm._e()]:_vm._e()],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"page-empty-img\"},[_c('img',{attrs:{\"src\":\"/static/icon/ic_footstep.png\",\"alt\":\"icon\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-599eb098\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/my/my-views.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-599eb098\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./my-views.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./my-views.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-599eb098\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./my-views.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/my-views.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.7@css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-599eb098\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./my-views.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"a821710a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-599eb098\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/my-views.vue\n// module id = SzAv\n// module chunks = 9","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.page {\\n  font-size: 14px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"E:/dev/wemall/src/views/my/my-views.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,gBAAgB;CACjB\",\"file\":\"my-views.vue\",\"sourcesContent\":[\"\\n.page {\\n  font-size: 14px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-599eb098\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/views/my/my-views.vue\n// module id = ZDk5\n// module chunks = 9"],"sourceRoot":""}