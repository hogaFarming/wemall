{"version":3,"sources":["webpack:///src/views/my/address.vue","webpack:///./src/views/my/address.vue?770f","webpack:///./src/views/my/address.vue"],"names":["address","query","undefined","length","fetchList","_this","this","list","id","$router","replace","path","_this2","then","res","extends_default","my_address","render","_vm","_h","$createElement","_c","_self","staticClass","loading","_e","_l","addr","attrs","value","defaultAddress","on","input","$event","setDefault","_v","staticStyle","margin-left","slot","pill","inline","nativeOn","click","editAddress","delAddress","selectAddress","margin-bottom","margin-right","_s","consignee","phone","_f","font-size","type","size","createAddress","canCreateCount","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"+HA2BAA,mCAKA,4BAFAC,0BAMAC,4DAIAC,iCAIAC,2CAGA,IAAAC,EAAAC,6EAEA,WACAC,2DACA,0BACAC,uEAQAP,iBACAC,eAEAM,KAJAF,KAAAG,QAAAC,SAAAC,KAAA,cAMAV,qCAEA,IAAAW,EAAAN,2DAGAE,oBACA,UACA,QAHAK,KAAA,SAAAC,KAKAV,+DAMA,mBACAH,MAAAc,OAAAT,KACAL,YAGAO,yDAIA,8BAEAP,WCxFAe,GADiBC,OAFjB,WAA0B,IAAAC,EAAAZ,KAAaa,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,2BAAqCL,EAAAM,QAAusCN,EAAAO,MAAvsCP,EAAAQ,GAAAR,EAAA,cAAAS,GAAmD,OAAAN,EAAA,OAAiBE,YAAA,qBAA+BF,EAAA,UAAeE,YAAA,QAAkBF,EAAA,cAAmBO,OAAOC,MAAAX,EAAAY,iBAAAH,EAAAnB,IAAuCuB,IAAKC,MAAA,SAAAC,GAAyBf,EAAAgB,WAAAP,EAAAM,OAA+Bf,EAAAiB,GAAA,KAAAd,EAAA,QAAyBe,aAAaC,cAAA,WAAuBnB,EAAAiB,GAAA,UAAAjB,EAAAiB,GAAA,KAAAd,EAAA,OAAyCO,OAAOU,KAAA,SAAeA,KAAA,UAAcjB,EAAA,YAAiBO,OAAOW,KAAA,GAAAC,OAAA,IAAsBC,UAAWC,MAAA,SAAAT,GAAyBf,EAAAyB,YAAAhB,OAAwBT,EAAAiB,GAAA,QAAAjB,EAAAiB,GAAA,KAAAd,EAAA,YAA4CO,OAAOW,KAAA,GAAAC,OAAA,IAAsBC,UAAWC,MAAA,SAAAT,GAAyBf,EAAA0B,WAAAjB,OAAuBT,EAAAiB,GAAA,gBAAAjB,EAAAiB,GAAA,KAAAd,EAAA,UAAkDoB,UAAUC,MAAA,SAAAT,GAAyBf,EAAA2B,cAAAlB,OAA0BN,EAAA,KAAUe,aAAaU,gBAAA,aAA2BzB,EAAA,QAAae,aAAaW,eAAA,SAAsB7B,EAAAiB,GAAAjB,EAAA8B,GAAArB,EAAAsB,cAAA5B,EAAA,QAAAH,EAAAiB,GAAAjB,EAAA8B,GAAArB,EAAAuB,YAAAhC,EAAAiB,GAAA,KAAAd,EAAA,KAAAH,EAAAiB,GAAAjB,EAAA8B,GAAA9B,EAAAiC,GAAA,UAAAjC,CAAAS,UAAA,KAAiJT,EAAAiB,GAAA,KAAAd,EAAA,kBAAmCe,aAAagB,YAAA,UAAoB/B,EAAA,YAAiBO,OAAOyB,KAAA,UAAAC,KAAA,QAA+Bb,UAAWC,MAAA,SAAAT,GAAyBf,EAAAqC,cAAAtB,OAA4BZ,EAAA,QAAae,aAAaW,eAAA,SAAsB7B,EAAAiB,GAAA,OAAAjB,EAAAiB,GAAA,KAAAd,EAAA,QAAAH,EAAAiB,GAAA,QAAAjB,EAAA8B,GAAA9B,EAAAsC,gBAAA,wBAEr0CC,oBCWjBC,EAbAC,EAAA,OAaAC,CACA5D,EACAgB,GATA,EAEA,KAEA,KAEA,MAUA6C,EAAA,QAAAH,EAAA","file":"static/js/34.76315117d82d3cc49cbb.js","sourcesContent":["<template>\n  <div class=\"page address-list-page\">\n    <template v-if=\"!loading\">\n      <div class=\"address-item mgb\" v-for=\"addr in list\">\n        <x-cell class=\"bdb\">\n          <x-checkbox :value=\"defaultAddress === addr.id\" @input=\"setDefault(addr, $event)\"></x-checkbox>\n          <span style=\"margin-left: 0.5em;\">默认地址</span>\n          <div slot=\"right\">\n            <x-button @click.native=\"editAddress(addr)\" pill inline>编辑</x-button>\n            <x-button @click.native=\"delAddress(addr)\" pill inline>删除</x-button>\n          </div>\n        </x-cell>\n        <x-cell @click.native=\"selectAddress(addr)\">\n          <p style=\"margin-bottom: 0.32rem;\"><span style=\"margin-right: 2em;\">{{ addr.consignee }}</span><span>{{ addr.phone }}</span></p>\n          <p>{{ addr | address }}</p>\n        </x-cell>\n      </div>\n      <x-fixed-bottom style=\"font-size: 16px;\">\n        <x-button @click.native=\"createAddress\" type=\"primary\" size=\"full\">\n          <span style=\"margin-right: 1em;\">+</span>\n          <span>还可添加 {{ canCreateCount }} 个收货地址</span>\n        </x-button>\n      </x-fixed-bottom>\n    </template>\n  </div>\n</template>\n<script>\n  export default {\n    data: function () {\n      const query = this.$route.query\n      return {\n        loading: true,\n        list: [],\n        query: query,\n        defaultAddress: undefined\n      }\n    },\n    computed: {\n      canCreateCount () {\n        return 10 - this.list.length\n      }\n    },\n    mounted () {\n      this.fetchList()\n    },\n    methods: {\n      fetchList () {\n        this.$http.withLoading('/api/user/address').then(res => {\n          this.loading = false\n          this.list = res.list\n          const addr = this.list.filter(item => item.is_default)[0]\n          if (addr) this.defaultAddress = addr.id\n        })\n      },\n      selectAddress (addr) {\n        let that = this\n        if(!this.query.type) return\n\n        const query = {\n          ...this.query,\n          type: undefined,\n          address_id: addr.id\n        }\n        // query.data = decodeURIComponent(this.url.params('data'));\n        this.$router.replace({path: '/cart/order', query});\n      },\n      setDefault (addr, checked) {\n        if (checked) {\n          this.$http.withLoading({\n            url: `/api/user/address/${addr.id}`,\n            data: {is_default: 1},\n            method: 'put'\n          }).then(res => {\n            this.fetchList()\n          })\n        }\n      },\n      editAddress (addr) {\n        this.$router.push({\n          path: '/my/address/edit',\n          query: {\n            ...this.query,\n            id: addr.id\n          }\n        })\n      },\n      createAddress () {\n        this.$router.push({\n          path: '/my/address/edit',\n          query: this.query\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/my/address.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page address-list-page\"},[(!_vm.loading)?[_vm._l((_vm.list),function(addr){return _c('div',{staticClass:\"address-item mgb\"},[_c('x-cell',{staticClass:\"bdb\"},[_c('x-checkbox',{attrs:{\"value\":_vm.defaultAddress === addr.id},on:{\"input\":function($event){_vm.setDefault(addr, $event)}}}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"0.5em\"}},[_vm._v(\"默认地址\")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\"},nativeOn:{\"click\":function($event){_vm.editAddress(addr)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('x-button',{attrs:{\"pill\":\"\",\"inline\":\"\"},nativeOn:{\"click\":function($event){_vm.delAddress(addr)}}},[_vm._v(\"删除\")])],1)],1),_vm._v(\" \"),_c('x-cell',{nativeOn:{\"click\":function($event){_vm.selectAddress(addr)}}},[_c('p',{staticStyle:{\"margin-bottom\":\"0.32rem\"}},[_c('span',{staticStyle:{\"margin-right\":\"2em\"}},[_vm._v(_vm._s(addr.consignee))]),_c('span',[_vm._v(_vm._s(addr.phone))])]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm._f(\"address\")(addr)))])])],1)}),_vm._v(\" \"),_c('x-fixed-bottom',{staticStyle:{\"font-size\":\"16px\"}},[_c('x-button',{attrs:{\"type\":\"primary\",\"size\":\"full\"},nativeOn:{\"click\":function($event){_vm.createAddress($event)}}},[_c('span',{staticStyle:{\"margin-right\":\"1em\"}},[_vm._v(\"+\")]),_vm._v(\" \"),_c('span',[_vm._v(\"还可添加 \"+_vm._s(_vm.canCreateCount)+\" 个收货地址\")])])],1)]:_vm._e()],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6312c38e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/views/my/address.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./address.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6312c38e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./address.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/my/address.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}