webpackJsonp([29],{VIPm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("4YfN"),o=i.n(n),s={data:function(){return{id:this.$route.params.id,commentList:[]}},mounted:function(){this.queryGoodsList()},methods:{queryGoodsList:function(){var t=this;this.$http.withLoading("/api/order/goods/"+this.id).then(function(e){t.commentList=e.list.map(function(t){return o()({},t,{star:5,content:""})})})},validateForm:function(){if(this.commentList.some(function(t){return!t.content}))return"评价内容不能为空"},submit:function(){var t=this,e=this.validateForm();e?this.$toast(e):this.$messagebox.confirm("确认发布评价吗?").then(function(e){if("cancel"!==e){var i={order_id:t.id,comment:t.commentList.map(function(t){return{order_goods_id:t.id,star:t.star,content:t.content,is_anonymous:0}})};t.$http.withLoading({url:"/api/goods/comments",data:i,method:"post"}).then(function(e){t.$toast("发布成功"),t.$router.back()})}})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.commentList,function(e){return i("div",{key:e.id,staticClass:"comment-form mgb"},[i("x-cell",{attrs:{bordered:""}},[i("div",{staticClass:"comment-image-wrap",staticStyle:{display:"inline-block","vertical-align":"middle",border:"1px solid #f0f0f0","margin-right":"0.3rem"}},[i("div",{staticClass:"image",staticStyle:{width:"1.07rem",height:"1.07rem"}},[i("img",{attrs:{src:e.goods_cover,alt:"pic"}})])]),t._v(" "),i("x-praise-input",{model:{value:e.star,callback:function(i){t.$set(e,"star",i)},expression:"item.star"}})],1),t._v(" "),i("x-textarea",{attrs:{placeholder:"说说宝贝的优点和美中不足的地方吧…"},model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"item.content"}}),t._v(" "),i("x-image-upload",{staticStyle:{padding:"0.2rem 0.48rem 0.4267rem"}})],1)}),t._v(" "),i("x-fixed-bottom",[i("x-button",{attrs:{type:"primary",size:"full"},nativeOn:{click:function(e){t.submit(e)}}},[t._v("发布")])],1)],2)},staticRenderFns:[]},a=i("/Xao")(s,r,!1,null,null,null);e.default=a.exports}});
//# sourceMappingURL=29.9a9c4b6acfe153428964.js.map