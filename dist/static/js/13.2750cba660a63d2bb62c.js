webpackJsonp([13],{BBDz:function(t,e,s){(t.exports=s("BkJT")(!0)).push([t.i,'\n.page {\n  font-size: 14px;\n}\n.address {\n  position: relative;\n}\n.address-border {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-image: url("/static/icon/ic_mail_mark.png");\n  background-repeat: repeat-x;\n}\n.cart-popup {\n  width: 100%;\n}\n.cart-popup-title {\n  text-align: center;\n}\n',"",{version:3,sources:["E:/dev/wemall/src/views/cart/cart-order.vue"],names:[],mappings:";AACA;EACE,gBAAgB;CACjB;AACD;EACE,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,UAAU;EACV,QAAQ;EACR,YAAY;EACZ,YAAY;EACZ,uDAAuD;EACvD,4BAA4B;CAC7B;AACD;EACE,YAAY;CACb;AACD;EACE,mBAAmB;CACpB",file:"cart-order.vue",sourcesContent:['\n.page {\n  font-size: 14px;\n}\n.address {\n  position: relative;\n}\n.address-border {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 3px;\n  background-image: url("/static/icon/ic_mail_mark.png");\n  background-repeat: repeat-x;\n}\n.cart-popup {\n  width: 100%;\n}\n.cart-popup-title {\n  text-align: center;\n}\n'],sourceRoot:""}])},Qfle:function(t,e,s){var a=s("BBDz");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("8bSs")("f6d5ef6a",a,!0)},XU50:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("4YfN"),i=s.n(a),n={data:function(){var t=this.$route.query.cart;return{loading:!0,carts:t?t.split(","):[],addressList:[],coupon:[],capital:{},goodsList:[],goodsTotalNum:0,orderData:{},note:"",ticketsVisible:!1,prodPopupVisible:!1,useIntegral:!1}},computed:{address:function(){var t=this.orderData&&this.orderData.user_address;if(t){var e=t.province,s=t.city,a=t.district,i=t.address,n=[e,s,a,i].filter(function(t){return!!t}).join("");t.text=n}return t},isFormReady:function(){return!!this.address}},mounted:function(){this.pageInit()},methods:{pageInit:function(){var t=this;this.fetchOrderData().then(function(){t.loading=!1})},fetchAddress:function(){},fetchOrderData:function(){var t=this,e={cart:this.carts.map(function(t){return{cart_id:t}})};return this.$http.withLoading({url:"/api/order/confirms",data:e,method:"post"}).then(function(e){t.addressList=e.data.address,t.coupon=e.data.coupon,t.capital=e.data.capital,t.goodsList=e.data.goods_data.map(function(t){var e=[];if(t.sku_name_arr)for(var s in t.sku_name_arr)e.push(t.sku_name_arr[s]);return i()({},t,{sku_show_name:e.join(" ")})}),t.goodsTotalNum=e.data.goods_total_num,t.orderData=e.data.order_data})},toggleAddress:function(){},showTickets:function(){this.coupon.length&&(this.ticketsVisible=!0)},submitOrder:function(){var t=this,e={cart:this.carts.map(function(t){return{cart_id:t}}),address_id:this.address.id,desc:this.note||void 0,is_invoice:0};this.useIntegral&&(e.integral=this.capital.can_use_integral),this.$http.withLoading({url:"/api/orders",data:e,method:"post"}).then(function(e){e.data.pay_done?t.$router.replace({path:"/order/paystatus",query:{orderid:e.data.order_id}}):t.$router.replace({path:"/cart/pay",query:{orderid:e.data.order_id}})})},ticketConfirm:function(){}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page order-confirm-page"},[t.address?s("x-cell",{staticClass:"address mgb",attrs:{"icon-right":"next_page"},nativeOn:{click:function(e){t.toggleAddress(e)}}},[s("x-media-object",{staticClass:"address-location",attrs:{icon:"address",padding:!1,size:"27px",push:"22px"}},[s("p",{staticClass:"address-concat"},[s("span",[t._v(t._s(t.address.consignee))]),t._v(" "),s("span",[t._v(t._s(t.address.phone))])]),t._v(" "),s("p",[t._v(t._s(t.address.text))])]),t._v(" "),s("div",{staticClass:"address-border"})],1):s("x-cell",{staticClass:"mgb bdb",attrs:{icon:"select_ele","icon-right":"next_page"},nativeOn:{click:function(e){t.toggleAddress(e)}}},[t._v("\n    请填写收货地址\n  ")]),t._v(" "),s("div",{staticClass:"goods-list"},t._l(t.goodsList,function(e){return s("x-media-object",{key:e.id,staticClass:"bdb",attrs:{pic:e.goods_cover,padding:""}},[t._v("\n      "+t._s(e.goods_title)+"\n      "),s("span",{attrs:{slot:"secondary"},slot:"secondary"},[t._v(t._s(e.sku_show_name))]),t._v(" "),s("x-money",{attrs:{slot:"bottom-left",color:"red",value:e.sale_total_price},slot:"bottom-left"})],1)})),t._v(" "),s("x-field",{staticClass:"mgb",attrs:{label:"买家留言",placeholder:"您可以给商家留言"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),s("x-cell",{attrs:{title:"运费 (快递)"}},[s("x-money",{staticStyle:{"font-size":"16px"},attrs:{slot:"right",value:t.orderData.express_price,size:"small"},slot:"right"})],1),t._v(" "),s("x-cell",{staticClass:"bdb",attrs:{title:"优惠券","icon-right":"next_page"},nativeOn:{click:function(e){t.showTickets(e)}}},[t.loading?s("span"):t.coupon.length?s("span",{attrs:{slot:"right"},slot:"right"},[t._v("有可用优惠券")]):s("span",{attrs:{slot:"right"},slot:"right"},[t._v("无可用优惠券")])]),t._v(" "),s("x-cell",{staticClass:"mgb"},[s("p",{staticClass:"black-3",staticStyle:{"margin-bottom":"5px"}},[t._v("当前积分："+t._s(t.capital.integral))]),t._v(" "),s("p",[t._v("可用"+t._s(t.capital.integral)+"积分抵扣\n      "),s("x-money",{attrs:{value:t.capital.integral_price}})],1),t._v(" "),s("div",{attrs:{slot:"right"},slot:"right"},[s("mt-switch",{model:{value:t.useIntegral,callback:function(e){t.useIntegral=e},expression:"useIntegral"}})],1)]),t._v(" "),s("x-fixed-bottom",{staticStyle:{"font-size":"14px"}},[s("x-cell",{attrs:{slot:"content"},slot:"content"},[t._v("\n      共 "+t._s(t.goodsTotalNum)+" 件商品\n      "),s("div",{attrs:{slot:"right"},slot:"right"},[t._v("\n        实付:\n        "),s("x-money",{attrs:{value:t.orderData.actual_price,color:"red"}})],1)]),t._v(" "),s("x-button",{attrs:{type:"primary",disabled:!t.isFormReady},nativeOn:{click:function(e){t.submitOrder(e)}}},[t._v("提交订单")])],1),t._v(" "),s("mt-popup",{staticClass:"cart-popup",attrs:{position:"bottom"},model:{value:t.ticketsVisible,callback:function(e){t.ticketsVisible=e},expression:"ticketsVisible"}},[s("x-cell",{staticClass:"cart-popup-title bdb"},[t._v("\n      使用优惠券\n      "),s("x-icon",{attrs:{slot:"right",type:"close"},nativeOn:{click:function(e){t.ticketsVisible=!1}},slot:"right"})],1),t._v(" "),s("ticket",{staticStyle:{margin:"0.48rem"}}),t._v(" "),s("x-button",{staticStyle:{"margin-top":"0.8rem"},attrs:{size:"full",type:"primary"},nativeOn:{click:function(e){t.ticketConfirm(e)}}},[t._v("确定")])],1),t._v(" "),s("mt-popup",{staticClass:"cart-popup",attrs:{position:"bottom"},model:{value:t.prodPopupVisible,callback:function(e){t.prodPopupVisible=e},expression:"prodPopupVisible"}},[s("x-cell",{staticClass:"cart-popup-title bdb"},[t._v("\n      选择生日券生效商品\n      "),s("x-icon",{attrs:{slot:"right",type:"close"},nativeOn:{click:function(e){t.ticketsVisible=!1}},slot:"right"})],1),t._v(" "),s("x-media-object",{staticClass:"bdb",attrs:{pic:"/static/img/order.png",padding:""}},[t._v("\n      2017年新款茶灵春季面膜50ml 提亮肌肤快速美容透白美丽快速美容\n      "),s("span",{attrs:{slot:"secondary"},slot:"secondary"},[t._v("提亮肌肤50ML")]),t._v(" "),s("x-money",{attrs:{slot:"bottom-left",value:588,color:"red"},slot:"bottom-left"})],1),t._v(" "),s("x-button",{staticStyle:{"margin-top":"0.8rem"},attrs:{size:"full",type:"primary"},nativeOn:{click:function(e){t.ticketConfirm(e)}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},r=s("/Xao")(n,o,!1,function(t){s("Qfle")},null,null);e.default=r.exports}});
//# sourceMappingURL=13.2750cba660a63d2bb62c.js.map